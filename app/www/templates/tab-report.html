<ion-view view-title="טופס תלונה">
  <ion-content>
    <form name="reportForm" ng-submit="addReport()" novalidate>
		  <div class="list">

        <!-- Report Description -->
        <label class="item item-input item-stacked-label">
          <i class="icon ion-android-list placeholder-icon"></i>
          <span class="input-label">פירוט התלונה ו/או הצעה לשיפור <span class="req-red">*</span></span>
          <textarea name="description" class="text-right" cols="30" rows="9" 
          placeholder="כאן המקום לפרט ולהסביר מה הייתה הבעיה? האם מדובר בבעיה חד פעמית או בבעיה קבועה? האם התלוננתם על הבעיה הזו בעבר? אנחנו מאמינים שאנו הנוסעים יודעים יותר טוב מכל אחד איך אפשר לשפר לנו את השירות. כאן המקום לפרט אילו דברים, קטנים או גדולים, ישפרו לכם את התחבורה הציבורית ויעודדו אתכם לנסוע יותר בתחבורה ציבורית. נשמח מאוד להמלצות לקווים חדשים, מסלולים שנחוץ בהם נתיב לתחבורה ציבורית ועוד." 
          ng-model="formData.description" ng-minlength="4" required></textarea>
	  	  </label>

        <!-- Report Date -->
	  	  <label class="item item-input item-stacked-label">
          <i class="icon ion-calendar placeholder-icon"></i>
          <span class="input-label">תאריך האירוע</span>
          <input type="date" ng-model="formData.date" >
	  	  </label>

        <!-- Report Time -->
        <label class="item item-input item-stacked-label">
          <i class="icon ion-android-time placeholder-icon"></i>
          <span class="input-label">שעת האירוע</span>
          <input type="time" ng-model="formData.time">
        </label>

        <!-- Report Bus Line -->
        <label class="item item-input item-stacked-label">
          <i class="icon ion-android-bus placeholder-icon"></i>
          <span class="input-label">מספר הקו</span>
          <input type="tel" 
          placeholder="מספר הקו שאתם מתלוננים עליו" 
          ng-model="formData.busLine">
        </label>


        <!-- Report Bus Company -->
        <label class="item item-input item-select">
            <div class="input-label">
              חברת התחבורה
            </div>
            <select ng-model="formData.transportCompany">
              <option>אגד</option>
              <option>אגד תעבורה</option>
              <option>אפיקים</option>
              <option>גולן</option>
              <option>גלים</option>
              <option>דן</option>
              <option>דן בדרום</option>
              <option>דן בצפון (מטרונית)</option>
              <option>מטרופולין</option>
              <option>נזרין טורס</option>
              <option>נתיב אקספרס</option>
              <option>סופרבוס</option>
              <option>סיטיפס</option>
              <option>עילית</option>
              <option>קווים</option>
              <option>רכבת ישראל</option>
              <option>ג"י.בי.טורס</option>
              <option>UNBS שירותי אוטובוסים מאוחדים נצרת</option>
              <option>אחר</option>
            </select>
        </label>

      <!-- Report Location -->
      <div class="item item-input">
        <button class="button button-rounded button-positive" ng-click="$event.preventDefault(); getPostion();">
        <i class="icon ion-location icon-top"></i><br>
        </button>
        <div class="row">
          <div class="col col-90">
            <p>לחץ על הכפתור לזיהוי מיקום</p>
            <!-- <h2>{{ formData.location.address }}</h2> -->
            <input type="text" ng-model="formData.location.address" name="location" value="{{formData.location.address}}" placeholder="או תכתב ידני">
          </div>
        </div>
      </div>
 
      <!-- Report Problem -->
      <label class="item item-input item-select"> 
        <div class="input-label">
          מהות התלונה
        </div>
        <select ng-model="formData.complaint">
          <option>אי עמידה בלו"ז</option>
          <option>בעיות בנתיבי תחבורה ציבורית</option>
          <option>דילוג על תחנות</option>
          <option>זיהום וליכלוך</option>
          <option>תלונות על נהגים</option>
          <option>תדירות נמוכה</option>
          <option>תקלות רב-קו</option>
          <option>מידע שגוי (בתחנה או באתר)</option>
          <option>מסלולי קווים</option>
          <option>אחר</option>
        </select>
      </label>

      <!-- Report Name -->
      <label class="item item-input item-stacked-label">
        <i class="icon ion-person placeholder-icon"></i>
        <span class="input-label">שם</span>
        <input type="text" 
        placeholder="שמך המלא הכרחי לצורך הטיפול בתלונה" 
        ng-model="formData.name">
      </label>

      <!-- Report Email -->
      <label class="item item-input item-stacked-label">
        <i class="icon ion-email placeholder-icon"></i>
        <span class="input-label">מייל <span class="req-red">*</span></span>
        <input type="email" name="email" 
        placeholder="מאפשר לברר פרטים נוספים על התלונה" 
        ng-model="formData.email" required>
      </label>

      <!-- Report Tele -->
      <label class="item item-input item-stacked-label">
        <i class="icon ion-ios-telephone placeholder-icon"></i>
        <span class="input-label">טלפון</span>
        <input type="tel" 
        placeholder="נייח או נייד" 
        ng-model="formData.telephone">
      </label>

      <!-- Report img or vedio -->
      <div class="item item-input">

        <button class="button button-rounded-left button-positive" ng-click="$event.preventDefault(); getPicture();">
        <i class="icon ion-android-camera icon-top"></i><br>
        </button>

        <button class="button button-rounded-right button-positive" ng-click="$event.preventDefault(); pickPicture();">
        <i class="icon ion-images icon-top"></i><br>
        </button>

        <div class="row">

          <div class="col col-75">

            <!-- placeholder -->
            <p ng-if="formData.images.length == 0">לחץ כדי לצרף תמונות</p>

            <!-- Display images -->
            <div class="row" ng-repeat="image in formData.images" ng-if="$index % 2 === 0">
              <!-- First col -->
              <div class="col col-50 imgcont" ng-if="$index < formData.images.length">
                <a ng-click="deletePicture($index)" class="imgcol">
                  <i class="icon ion-close-round icon-top"></i>
                </a>
                <img ng-src="{{ formData.images[$index] }}" width="100%" alt="img">
              </div>
              <!-- Second col -->
              <div class="col col-50 imgcont" ng-if="$index + 1 < formData.images.length">
                <a ng-click="deletePicture($index + 1)" class="imgcol">
                  <i class="icon ion-close-round icon-top"></i>
                </a>
                <img ng-src="{{ formData.images[$index + 1] }}" width="100%" alt="img">
              </div>
            </div>

          </div>
        </div>

      </div>

      <div class="padding">
        <p class="report-text">שליחת טופס הדיווח תאפשר לך לקבל עדכונים מ 15 דקות ארגון צרכני תחבורה ציבורית. ניתן להפסיק קבלת עדכונים בכל עת.​<span class="delete-text">א</span></p>
        <hr>
        <div class="error">
          <!-- ReportDescription Validation -->
          <p ng-hide="!reportForm.description.$error.required">
            פירוט תלונה שדה חובה
            <i class="icon ion-bug"></i>
          </p>
          <p ng-hide="!reportForm.description.$error.minlength">
            פירוט תלונה חייב להיות יותר מ 3 תווים
            <i class="icon ion-bug"></i>
          </p>
          <!-- Email Validation -->
          <p ng-hide="!reportForm.email.$error.required">
            אימייל שדה חובה
            <i class="icon ion-bug"></i>
          </p>
          <p ng-show="reportForm.email.$invalid && !reportForm.email.$pristine"
          	 ng-hide="!reportForm.email.$invalid">
            אימייל לא תקין
            <i class="icon ion-bug"></i>
          </p>
        </div>
        <button type="submit" class="button button-block button-positive"
          ng-disabled="reportForm.$invalid">
         הגש תלונה
        </button>
        <button ng-click="$event.preventDefault(); reset();" class="button button-block button-positive">
         איפוס
        </button>
      </div>

     	</div>
    </form>
  </ion-content>
</ion-view>
